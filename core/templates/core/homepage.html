{% extends "base.html" %}

{% block title %}Home | Profile{% endblock %}

{% block content %}
<div class="app-container home-grid">
    <header class="app-header">
        <h1 class="app-title">I Feel You</h1>
        <p class="app-subtitle">One World, Different Feelings üåç</p>
    </header>

    {% if user.is_authenticated %}
    <section class="home-main">
        <!-- Stories strip -->
        <div class="stories" aria-label="Stories">
            <div class="story-item your-story">
                <div class="story-avatar">{{ user.username|first|upper }}</div>
                <span class="add-badge" title="Add story">Ôºã</span>
                <span class="story-name">Your Story</span>
            </div>
            {% for i in "xxxx" %}
            <div class="story-item is-disabled" title="Stories coming soon">
                <div class="story-avatar">S</div>
                <span class="story-name">Soon</span>
            </div>
            {% endfor %}
        </div>

        <!-- Quick actions -->
        <div class="quick-actions">
            <a class="qa-btn primary" href="{% url 'feed' %}">‚ûï New Post</a>
            <a class="qa-btn" href="{% url 'feed' %}">üì∞ Open Feed</a>
            <button class="qa-btn" type="button" disabled title="Coming soon">üîî Notifications</button>
            <button class="qa-btn" type="button" disabled title="Coming soon">‚öôÔ∏è Settings</button>
        </div>

        <!-- Explore grid (placeholders) -->
        <div class="explore section">
            <h3 class="section-title"><span class="section-icon">üîé</span> Explore</h3>
            <div class="explore-grid">
                {% for i in "xxxx" %}
                <a class="explore-card" href="{% url 'feed' %}" aria-label="Open Feed">
                    <div class="explore-thumb"></div>
                    <div class="explore-meta">
                        <span class="pill">Trending</span>
                        <span class="pill muted">Feelings</span>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
    </section>

    <aside class="home-side">
        <!-- Profile summary -->
        <div class="profile-card compact">
            <div class="avatar-wrapper">
                <div class="avatar-placeholder">{{ user.username|first|upper }}</div>
            </div>
            <div class="profile-summary">
                <div class="username">{{ user.username }}</div>
                <div class="email">{% if user.email %}{{ user.email }}{% else %}Email not available{% endif %}</div>
            </div>
            <div class="profile-actions">
                <a href="{% url 'feed' %}" class="btn secondary">View Feed</a>
                <form action="{% url 'logout' %}" method="post" class="logout-form" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn danger">Logout</button>
                </form>
            </div>
        </div>

        <!-- Profile edit -->
        <div class="profile-card" style="margin-top:1rem;">
            <h3 class="section-title">Edit profile</h3>
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="form_type" value="profile" />
                {% if profile_form %}
                    {% for field in profile_form %}
                        <div class="form-group">
                            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                            {{ field }}
                            {% if field.errors %}
                                <p class="field-error">{% for error in field.errors %}{{ error }}{% endfor %}</p>
                            {% endif %}
                        </div>
                    {% endfor %}
                {% endif %}
                <button type="submit" class="btn primary">Save changes</button>
            </form>
        </div>

        <!-- Connect (placeholders) -->
        <div class="suggestions section">
            <div class="section-title-row">
                <h3 class="section-title"><span class="section-icon">ü§ù</span> Connect</h3>
                <span class="muted small" title="Coming soon">Coming soon</span>
            </div>
            <ul class="suggestions-list">
                {% for i in "xxx" %}
                <li class="suggestion-item">
                    <div class="sugg-avatar">U</div>
                    <div class="sugg-meta">
                        <strong>User {{ forloop.counter }}</strong>
                        <small class="muted">Suggested</small>
                    </div>
                    <button class="sugg-action is-disabled" type="button" disabled title="Connect coming soon">Connect</button>
                </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Trending feelings (show 1-2 neatly) -->
        <div class="trends section">
            <div class="section-title-row">
                <h3 class="section-title"><span class="section-icon">üí´</span> Trending feelings</h3>
                <span class="muted small" title="More soon">Preview</span>
            </div>
            <ul class="trend-list compact">
                <li><a href="{% url 'feed' %}">#gratitude</a></li>
                <li><a href="{% url 'feed' %}">#support</a></li>
            </ul>
        </div>
    </aside>

    {% else %}
    <section class="guest-section">
        <h3>Welcome to I Feel You</h3>
        <p class="guest-text">A place to share your thoughts and emotions with the community.</p>

        <div class="auth-buttons">
            <a href="{% url 'login' %}" class="btn primary">Log In</a>
            <a href="{% url 'signup' %}" class="btn secondary">Sign Up</a>
        </div>

        <div class="guest-explore">
            <h4 class="section-title" style="margin-top:1rem;">Explore what people are sharing</h4>
            <div class="explore-grid">
                {% for i in "xxxx" %}
                <a class="explore-card" href="{% url 'feed' %}">
                    <div class="explore-thumb"></div>
                    <div class="explore-meta"><span class="pill">Popular</span></div>
                </a>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}
</div>
{% endblock %}
